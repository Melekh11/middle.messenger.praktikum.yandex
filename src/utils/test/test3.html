<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

firefox браузер
id user: 20579
токен для чата 9a9cbf2b8482126ba29c0550c1d1b5ef8df2ede4:1659106048
<script>
    const host = 'https://ya-praktikum.tech';



    // fetch(`${host}/api/v2/chats/token/354`, {
    //     method: 'POST',
    //     mode: 'cors',
    //     credentials: 'include',
    // })
    //     .then(response => response.json())
    //     .then(data => {
    //         alert(data.token)
    //         return data
    //     });


    fetch(`${host}/api/v2/auth/user`, { // Получаем подробную информацию о пользователе и проверяем, что куки проставились
        method: 'GET',
        mode: 'cors',
        credentials: 'include',
    })
        .then(r => r.json())
        .then(data => {
            console.log('user', data);
        });

    // messages_2.html
    const socket = new WebSocket(`wss://ya-praktikum.tech/ws/chats/20579/354/9a9cbf2b8482126ba29c0550c1d1b5ef8df2ede4:1659106048`);

    socket.addEventListener('open', () => {
        console.log('Соединение установлено');

        socket.send(JSON.stringify({
            content: 'Моё второе сообщение миру!',
            type: 'message',
        }));
    });

    socket.addEventListener('close', event => {
        if (event.wasClean) {
            console.log('Соединение закрыто чисто');
        } else {
            console.log('Обрыв соединения');
        }

        console.log(`Код: ${event.code} | Причина: ${event.reason}`);
    });

    socket.addEventListener('message', event => {
        console.log('Получены данные', event.data);
    });

    socket.addEventListener('error', event => {
        console.log('Ошибка', event.message);
    });
</script>
</body>
</html>